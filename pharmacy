package pages;

import java.util.Map;
import org.openqa.selenium.*;
import org.openqa.selenium.interactions.Actions;
import org.openqa.selenium.support.ui.Select;

public class pharmacy_Pages {

    WebDriver driver;

    public pharmacy_Pages(WebDriver driver) {
        this.driver = driver;
    }

    public boolean loginToHealthAppByGivenValidCredetial(Map<String, String> data) throws Exception {
        try {
            driver.get(data.get("url"));
            driver.findElement(By.id("UserName")).sendKeys(data.get("username"));
            driver.findElement(By.id("Password")).sendKeys(data.get("password"));
            driver.findElement(By.xpath("//button[text()='Sign In']")).click();
            Thread.sleep(3000);
            return driver.getTitle().contains("Danphe");
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }

    public String verifyTitleAndURLOfTheHomePage() {
        String title = driver.getTitle();
        String url = driver.getCurrentUrl();
        System.out.println("üè† Title: " + title);
        System.out.println("üåê URL: " + url);
        return title + " | " + url;
    }

    public void openPharmacyModule() {
        driver.findElement(By.xpath("//a[contains(text(),'Pharmacy')]")).click();
        System.out.println("üß≠ Navigated to Pharmacy module");
    }

    public void highlightSubModules() throws Exception {
        WebElement subModule = driver.findElement(By.xpath("//a[contains(text(),'Orders')]"));
        new Actions(driver).moveToElement(subModule).perform();
        Thread.sleep(1000);
        System.out.println("‚ú® Highlighted Orders submodule");
    }

    public void openOrderTab() {
        driver.findElement(By.xpath("//a[contains(text(),'Orders')]")).click();
        System.out.println("üì¶ Opened Orders tab");
    }

    public void addNewGoodReceipt(Map<String, String> data) throws Exception {
        driver.findElement(By.xpath("//button[contains(text(),'Add Goods Receipt')]")).click();
        new Select(driver.findElement(By.id("Supplier"))).selectByVisibleText(data.get("supplier"));
        driver.findElement(By.id("InvoiceNo")).sendKeys(data.get("invoice"));
        driver.findElement(By.xpath("//button[text()='Save']")).click();
        Thread.sleep(2000);
        System.out.println("‚úÖ Added new goods receipt");
    }
}
